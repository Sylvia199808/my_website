---
title: "GDP components over time and among countries"
description: MGDP components over time and among countries
date: '2021-10-20'
image: gdp02.jpg
keywords: ''
slug: GDP
draft: no
---

```{r, setup, echo=FALSE}
knitr::opts_chunk$set(
  message = FALSE, 
  warning = FALSE, 
  tidy=FALSE,     # display code as typed
  size="small")   # slightly smaller font for code
options(digits = 3)

# default figure size
knitr::opts_chunk$set(
  fig.width=6.75, 
  fig.height=6.75,
  fig.align = "center"
)
```


```{r load-libraries, echo=FALSE}
library(tidyverse)  # Load ggplot2, dplyr, and all the other tidyverse packages
library(mosaic)
library(ggthemes)
library(GGally)
library(readxl)
library(here)
library(skimr)
library(janitor)
library(broom)
library(tidyquant)
library(infer)
library(openintro)
library(scales)
```
# GDP components over time and among countries

```{r read_GDP_data}

UN_GDP_data  <-  read_excel(here::here("data", "GDP.xlsx"), # Excel filename
                sheet="Download-GDPconstant-USD-countr", # Sheet name
                skip=2) # Number of rows to skip

```

## Tidy the Data
```{r reshape_GDP_data}
tidy_GDP_data  <-  UN_GDP_data %>% 
  pivot_longer(cols = 4:51, 
              names_to = "Year", 
              values_to = "GDP") %>% 
  transform(GDP = GDP/1e9)

tidy_GDP_data_frame <- data.frame(tidy_GDP_data)

#names
tidy_GDP_data_frame[tidy_GDP_data_frame == "Imports of goods and services"] <- "Imports"
tidy_GDP_data_frame[tidy_GDP_data_frame == "Exports of goods and services"] <- "Exports"
tidy_GDP_data_frame[tidy_GDP_data_frame == "General government final consumption expenditure"] <- "Government expenditure"
tidy_GDP_data_frame[tidy_GDP_data_frame == "Household consumption expenditure (including Non-profit institutions serving households)"] <- "Household expenditure"


glimpse(tidy_GDP_data_frame)


# Let us compare GDP components for these 3 countries
country_list <- c("France","China", "United States")
```

## Visualization

```{r fig.width = 9.5}
tidy_GDP_data_frame_Order <- tidy_GDP_data_frame %>%
  filter(Country %in% country_list, IndicatorName %in% c("Gross capital formation", "Exports", "Imports", "Household expenditure", "Government expenditure"))

tidy_GDP_data_frame_Order[,3]<-factor(tidy_GDP_data_frame_Order[,3], levels = c("Gross capital formation", "Exports","Government expenditure","Household expenditure","Imports")) #to order IndicatorName

tidy_GDP_data_frame_Order %>%
  group_by(Country)%>%
  ggplot(aes(x = Year, y = GDP, color = IndicatorName, group = IndicatorName))+
  geom_line(size = 1)+
  facet_wrap(~Country)+
  scale_x_discrete(breaks = seq(1970,2017, by = 10))+
  labs(title = "GDP components over time", 
       subtitle = "In constant 2010 USD",
       y = "Bilion US$",
       x = "")+
  theme_bw()+
    NULL
```
